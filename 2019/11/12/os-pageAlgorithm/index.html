<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>OS - 页面置换算法 | Nightingale</title>
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
<div class="Shell">
    <aside class="SideBar">
    <section class="avatar" style="background-image: url(/assets/header.png)">
        <div class="av-pic" style="background-image: url(https://avatars2.githubusercontent.com/u/19544795?s=400&amp;u=9ee5080d4cb44baabaf5b4af09769c17e14b1fcc&amp;v=4)">
        </div>
    </section>
    <section class="menu">
        <div>Nightingale</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/categories/" class="Btn">
              <li>Categories</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class="ContentView">
    <header class="PageTitle">
        <h1>OS - 页面置换算法</h1>
    </header>

    <section>
      <p>OS页面置换算法简记，不系统</p>
<h3 id="置换算法的概念"><a href="#置换算法的概念" class="headerlink" title="置换算法的概念"></a>置换算法的概念</h3><ul>
<li>功能：选择被置换的物理页面</li>
<li>目标：尽可能减少调入调出次数</li>
<li><code>页面锁定</code>：某些页面不可被换出（OS相关、要求响应速度等）<ul>
<li>依靠页表中锁定标志位解决</li>
</ul>
</li>
</ul>
<a id="more"></a>
<h4 id="评价方法"><a href="#评价方法" class="headerlink" title="评价方法"></a>评价方法</h4><ul>
<li>模拟页面置换行为，记录缺页次数</li>
<li>缺页越少性能越好</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ul>
<li>局部置换算法<ul>
<li>置换页面选择范围仅限当前进程所占物理页面</li>
</ul>
</li>
<li>全局置换算法<ul>
<li>选择范围：所有可换出物理页面</li>
</ul>
</li>
</ul>
<h3 id="局部置换算法"><a href="#局部置换算法" class="headerlink" title="局部置换算法"></a>局部置换算法</h3><p>进程所能使用的物理页面数目固定</p>
<h4 id="最优算法（OPT）"><a href="#最优算法（OPT）" class="headerlink" title="最优算法（OPT）"></a>最优算法（OPT）</h4><ul>
<li>置换未来最长时间不访问的页面</li>
<li><code>无法实现</code>，由于无法预测</li>
<li>作为其他置换算法的性能评价标准</li>
</ul>
<h4 id="先进先出（FIFO）"><a href="#先进先出（FIFO）" class="headerlink" title="先进先出（FIFO）"></a>先进先出（FIFO）</h4><ul>
<li>实现简单</li>
<li>性能差</li>
<li>Belady现象</li>
<li>很少单独使用</li>
<li>数据结构：链表</li>
</ul>
<h4 id="最近最久未使用（LRU）"><a href="#最近最久未使用（LRU）" class="headerlink" title="最近最久未使用（LRU）"></a>最近最久未使用（LRU）</h4><ul>
<li>最长时间没有被使用到的(统计时间)</li>
<li>近似OPT，开销大，难以实现</li>
<li>栈/链表实现，日常维护开销过大</li>
</ul>
<h4 id="时钟置换算法（Clock）"><a href="#时钟置换算法（Clock）" class="headerlink" title="时钟置换算法（Clock）"></a>时钟置换算法（Clock）</h4><ul>
<li>仅记录页面是否被访问过，不记录访问次数</li>
<li>数据结构：<ul>
<li>访问位：访问置1，未访问置0</li>
<li>环形链表</li>
</ul>
</li>
<li>特征：LRU和FIFO的折中，页面等价的情况下按FIFO</li>
</ul>
<h5 id="改进的Clock算法"><a href="#改进的Clock算法" class="headerlink" title="改进的Clock算法"></a>改进的Clock算法</h5><ul>
<li>添加修改位</li>
<li>只读修改访问位，写修改两个标志位</li>
</ul>
<h4 id="最不常用算法（LFU）"><a href="#最不常用算法（LFU）" class="headerlink" title="最不常用算法（LFU）"></a>最不常用算法（LFU）</h4><ul>
<li>关注访问次数（次数越多越好）</li>
<li>对统计次数做定期右移进行衰减，避免有早期内存页长期驻留内存</li>
<li>对内存访问并不算好用，访问硬盘时相对合适</li>
</ul>
<blockquote>
<p>Clock算法和LFU都是对LRU的某种简化，相应的统计精度会下降<br>选择页面置换算法即近似程度和准确性中做折中</p>
</blockquote>
<h4 id="局部置换算法的比较"><a href="#局部置换算法的比较" class="headerlink" title="局部置换算法的比较"></a>局部置换算法的比较</h4><ul>
<li>OPT性能最好，FIFO性能最差。</li>
<li>对于未被访问的页面，所有置换算法性能均和FIFO一样</li>
<li>对于已被访问的页面，性能LRU &gt; Clock &gt; FIFO</li>
</ul>
<h3 id="Belady现象"><a href="#Belady现象" class="headerlink" title="Belady现象"></a>Belady现象</h3><p>随着分配给进程的物理页面增加，其缺页率并没有减少，反而不变或增加。</p>
<ul>
<li>FIFO存在belady</li>
<li>LRU没有belady</li>
<li><code>所有类似于栈式结构访问的都是没有belady的现象</code></li>
</ul>
<h3 id="全局置换算法"><a href="#全局置换算法" class="headerlink" title="全局置换算法"></a>全局置换算法</h3><p>局部置换没有考虑进程访存差异</p>
<ul>
<li>思路：给进程分配数目可变的物理页面</li>
<li>CPU利用率和并发进程数之间相互制约<ul>
<li>由于并发进程的内存访问会降低访存的局部性特征，因此缺页率上升，CPU利用率下降</li>
</ul>
</li>
</ul>
<h4 id="工作集算法"><a href="#工作集算法" class="headerlink" title="工作集算法"></a>工作集算法</h4><p>工作集：进程某段时间使用的逻辑页面的集合<br>常驻集：当前时刻，进程实际驻留内存当中的页面集合</p>
<ul>
<li>常驻集包括工作集时，缺页较少</li>
<li>工作集切换之间，缺页较多</li>
<li>进程的常驻集大小达到一定数目后，缺页率不会明显下降</li>
</ul>
<p>工作集置换算法：</p>
<ul>
<li>思路：置换出不在工作集中的页面</li>
<li>当前时刻前t个内存访问的页的引用是工作集，t为窗口大小</li>
<li>开销相对较大</li>
</ul>
<h4 id="缺页率算法"><a href="#缺页率算法" class="headerlink" title="缺页率算法"></a>缺页率算法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">缺页率 = 缺页次数/内存访问次数</span><br><span class="line">or</span><br><span class="line">缺页率 = 缺页平均时间间隔的倒数</span><br></pre></td></tr></table></figure>
<p>缺页率影响因素：</p>
<ul>
<li><code>页面置换算法</code></li>
<li>进程所拥有的物理页面数目</li>
<li>页面大小</li>
<li>程序编写方法</li>
</ul>
<p>缺页率置换算法</p>
<ul>
<li>思路：通过调节常驻集大小，使每个进程的缺页率保持在一个合理的范围内<ul>
<li>缺页率过高，增加进程物理页面</li>
<li>缺页率过低，减少进程物理页面</li>
</ul>
</li>
<li>实现：确定一个常量T，如果缺页<ul>
<li>当前时刻 - 上次缺页时刻 &gt; T，换出两次时间节点之间没有被引用的页</li>
<li>当前时刻 - 上次缺页时刻 ≤ T，增加缺页到常驻集</li>
</ul>
</li>
</ul>
<h3 id="抖动和负载控制"><a href="#抖动和负载控制" class="headerlink" title="抖动和负载控制"></a>抖动和负载控制</h3><h4 id="抖动"><a href="#抖动" class="headerlink" title="抖动"></a>抖动</h4><p>抖动：</p>
<ul>
<li>进程物理页面少，不能包含工作集</li>
<li>大量缺页，置换频繁</li>
<li>进程运行速度慢</li>
</ul>
<p>原因：内存中进程太多了</p>
<h4 id="负载控制"><a href="#负载控制" class="headerlink" title="负载控制"></a>负载控制</h4><p>平均缺页间隔时间(MTBF) = 缺页异常处理时间(PFST)</p>


      

    </section>
    
      <section class="ArticleMeta">
          <div>
            发布于&nbsp;
            <time datetime="2019-11-12T10:51:53.896Z" itemprop="datePublished">
              2019-11-12
            </time>
          </div>
          
            <div>
              tags: 
  <li class="meta-text">
  { <a href="/tags/OS/">OS</a> }
  </li>


            </div>
          
      </section>
    
    
</article>

  
</div>

            <footer>
    <div>© 2020 - Night1ng4le </div>
    <div>
        <span>
            Powered by <a href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>
<script src="/js/pager/dist/singlepager.js"></script>
<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>